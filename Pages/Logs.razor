@page "/Logs"
@inject Inventory.Client.Services.StockService StockApi
@using Inventory.Client.Modelos
@using System.Text.Json;
@inject IJSRuntime JS
@using Inventory.Client.Shared

<PageTitle>Logs Information</PageTitle>

<h3>Log Info</h3>

@if (data == null)
{
    <p>No data yet. Go to the home page first and sycn inventory.</p>
}
else
{
    <p>LOG Logic</p>
<a class="download-btn" href="@data.LogDownloadUrl" target="_blank">
    <i class="bi bi-file-earmark-arrow-down-fill"></i>Download Logic Log</a>
    <hr>
    <br>
    @if (data.Logictlogictrace != null)
{
    <div class="log-box">
        @foreach (var line in data.Logictlogictrace)
        {
            <div class="log-line">@line</div>
        }
    </div>
    <br>
    <strong>Raw Logs</strong><br>
        <pre>@JsonSerializer.Serialize(data.Logictlogictrace, new JsonSerializerOptions { WriteIndented = true })</pre>

}
}

@code {
    ApiResponse? data;

    protected override void OnInitialized()
    {
        data = StockApi.LastResponse; // <-- read cached response
    }
}